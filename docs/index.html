<!DOCTYPE html>
<html lang="en">
<head>
    <title>Stinky 2</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/custom.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@observablehq/inspector@5/dist/inspector.css">
    <script src="https://kit.fontawesome.com/342ac9e330.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
<nav class="navbar navbar-expand-md navbar-light sticky-top bg-light">
    <div class="container">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav me-auto mb-2 mb-md-0">
                <li class="nav-item">
                    <a class="nav-link" href="#">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#map">Map</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#analysis">Analysis</a>
                </li>
            </ul>
                <span class="navbar-text">Report an Odor in the SmellMyCity App:</span>
                <a class="navbar-brand" href='https://play.google.com/store/apps/details?id=org.cmucreatelab.smellmycity&hl=en_US'
                    target="_blank"><img alt='Get it on Google Play'
                        src='https://play.google.com/intl/en_us/badges/static/images/badges/en_badge_web_generic.png' height="60" /></a>
                <a class="navbar-brand" href='https://apps.apple.com/us/app/smell-mycity/id1299801253' target="_blank"><img
                        alt='Download on the App Store'
                        src='https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg' height="40" /></a>
                    <a class="nav-link fa-brands fa-github fs-3" href="https://github.com/cs7290/stinky"
                       target="_blank"></a>
        </div><!-- /.collapsible navbar -->
    </div><!-- /.container -->
</nav>

<div class="container">
    <!-- Intro Row -->
    <div class="row pt-3">
        <div class="col">
            <div class="p-5 bg-light rounded-3 border">
                <h1 class="display-5 fw-bold">Air Quality Reports in South Portland</h1>
                <p class="fs-4">Since 2020, South Portland-area residents have collected over 7,000 reports of unpleasant odors through
                    the <a href="https://smellpittsburgh.org/">SmellMyCity</a> app. Explore the results using the map and charts
                    below.
                </p></div>
        </div>
        <!-- end .col -->
    </div>
    <!-- End Intro Row -->

	<div class="row" id="map"><!-- Map Row -->
		<div class="col-12 pt-2">
			<div style="position: relative" class="container bg-light rounded">
				<div id="observablehq-container"></div>
			</div>
		</div>
	</div><!-- End Map Row -->

	<div class="row"><!-- Brush and Buttons Row -->
		<div class="col"><div id="observablehq-brush" class="pt-2"></div></div>
	</div><!-- End Brush and Buttons Row -->

    <div class="row p-3"> <!-- Chart Help Row -->
        <div class="col-md-4">
            <div class="card text-center">
                <div class="card-body">
                    <h5 class="card-title">Filter by Date</h5>
                    <p class="card-text">The histogram chart above shows how the number of reports changes over time. Drag the
                        gray box to highlight a specific time period.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-center">
                <div class="card-body">
                    <h5 class="card-title">Filter by Wind Direction</h5>
                    <p class="card-text">The compass in the bottom right corner allows you to show only reports that were
                        submitted when wind was coming
                        from a given
                        direction.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-center">
                <div class="card-body">
                        <div class="row pt-2">
                            <div id="observablehq-animateBtn"></div>
                        </div>
                        <div class="row pt-2">
                            <div id="observablehq-selectAllBtn"></div>
                        </div>
                        <div class="row pt-2">
                            <div id="observablehq-resetBtn"></div>
                        </div>
                </div>
            </div>
        </div>
    </div> <!-- End Chart Help Row -->

    <div class="col-sm"><!-- Carousel Column -->
        <!-- Note: The style is set to height: 90% so that the carousel will match the height of the column above.
                This keeps the carousel from changing sizes as the amount of text changes on each slide. This will
                not work if there is more text in thr carousel than in the div above. This also does not work when
                bootstrap moves to small screen mode. -->
        <div id="quotes" class="carousel slide carousel-dark" data-bs-ride="carousel">
            <div class="carousel-inner bg-light bg-gradient text-secondary rounded-3 p-2">
                <div class="carousel-item active text-center">
                    <blockquote class="blockquote">
                        <p>Imagine you buy a house in South Portland and smell gas fumes everyday.</p>
                    </blockquote>
                    <figcaption class="blockquote-footer">
                        <cite>Portland resident</cite>
                    </figcaption>
                </div>

                <div class="carousel-item text-center">
                    <blockquote class="blockquote">
                        <p>Would be pretty cool if the city of South Portland prioritized the health of its citizens.</p>
                    </blockquote>
                    <figcaption class="blockquote-footer">
                        <cite>Portland resident</cite>
                    </figcaption>
                </div>

                <div class="carousel-item text-center">
                    <blockquote class="blockquote">
                        <p>I have to go inside because the air smells terrible.</p>
                    </blockquote>
                    <figcaption class="blockquote-footer">
                        <cite>Portland resident</cite>
                    </figcaption>
                </div>

                <div class="carousel-item text-center">
                    <blockquote class="blockquote">
                        <p>This happens at night and runs off into the morning. Woke us up even with our windows closed.</p>
                    </blockquote>
                    <figcaption class="blockquote-footer">
                        <cite>Portland resident</cite>
                    </figcaption>
                </div>

                <div class="carousel-item text-center">
                    <blockquote class="blockquote">
                        <p>The smell of gas was very strong last night in the Cash Corner area.</p>
                    </blockquote>
                    <figcaption class="blockquote-footer">
                        <cite>Portland resident</cite>
                    </figcaption>
                </div>

                <div class="carousel-item text-center">
                    <blockquote class="blockquote">
                        <p>Smelled strong oil on outer Broadway near the Greater Portland Christian School.</p>
                    </blockquote>
                    <figcaption class="blockquote-footer">
                        <cite>Portland resident</cite>
                    </figcaption>
                </div>

                <div class="carousel-item text-center">
                    <blockquote class="blockquote">
                        <p>I noticed this smell again several times this week. I cannot be outside.</p>
                    </blockquote>
                    <figcaption class="blockquote-footer">
                        <cite>Portland resident</cite>
                    </figcaption>
                </div>

                <div class="carousel-item text-center">
                    <blockquote class="blockquote">
                        <p>Very irritating, overwhelming. Occurred on Veterans Bridge at 9 PM last night next to
                            Sprague oil tanks.</p>
                    </blockquote>
                    <figcaption class="blockquote-footer">
                        <cite>Portland resident</cite>
                    </figcaption>
                </div>

                <div class="carousel-item text-center">
                    <blockquote class="blockquote">
                        <p>Started about an hour ago. Windy day but the smell has been persistent.</p>
                    </blockquote>
                    <figcaption class="blockquote-footer">
                        <cite>Portland resident</cite>
                    </figcaption>
                </div>

                <div class="carousel-item text-center">
                    <blockquote class="blockquote">
                        <p>I live in the West End. Many days this summer the odor has been very unpleasant. It feels toxic.</p>
                    </blockquote>
                    <figcaption class="blockquote-footer">
                        <cite>Portland resident</cite>
                    </figcaption>
                </div>

                <div class="carousel-item text-center">
                    <blockquote class="blockquote">
                        <p>Criminal this is still happening all years. Authorities let it go on... and... on.</p>
                    </blockquote>
                    <figcaption class="blockquote-footer">
                        <cite>Portland resident</cite>
                    </figcaption>
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#quotes" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#quotes" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
        </div>
    </div><!-- End Carousel Column -->

    <!-- What does it smell like Row -->
    <div id="analysis" class="row mt-3 mb-3">
        <div class="col">
            <h2>What does it smell like?</h2>
            <p>When users report a smell, they are given the option of providing a description for what the smell they
            are reporting. In order to get a better idea of what kinds of stinks are plaguing the residents of Portland,
            we counted the number of times people used specific words in their descriptions, and then categorized
            them into six groups.</p>
            <div id="observable-wordFrequencyGroupChart"></div>
            <p>The cart above shows a clear trend regarding smell reports: <b>the vast majority of smells that motivate
                people to file a report originate from the petrochemical industry.</b></p>
        </div>
    </div><!-- End What does it smell like Row -->
    <div class="row mt-3 mb-3"><!-- How did we calculate what does it smell like -->
        <div class="col">
            <h4>How were smell types calculated?</h4>
            <p>To categorize what types of smells people reported, we counted the words used in each smell report
            description. First, each description was split into the descriptions component words. Then, words unrelated
            to smell descriptions, such as "always", "very", and "ruining", were removed. Next, a list of synonyms were
            used to remove spelling errors, differences in tense and plurality, and regional and cultural differences.
            For example: "sewer" was replaced with "sewage", "gassy" was replaced with "gas", "pavement" with "asphalt",
            and "eggs" with "sulfur".</p>
            <p>At this point, we have the un-grouped terms used in each description. When we count these terms, we can
            create the chart below, which shows terms used in descriptions which were counted at least fifty times.
            Several descriptions of the local smells are repeated often: "petroleum", "tar", "oil", "asphalt", "sulfur",
            "gasoline". Complaints also mention feeling nausea, throat irritation, and headaches.</p>
            <div id="observable-wordFrequencyChart"></div>
            <p>These terms were categorized by where they most likely originated, except for terms that only related to
            safety ("carcinogen", "nausea", etc.). For example: "oil", "gas", and "propage" were all categorized as
            "petrochemical"; "rubber", "asphalt", and "tires" were mapped to "transportation"; and "carcinogen",
            "electrical", and "bitter" were mapped to "unknown, dangerous".</p>
            <p>To see exactly how these charts were created see this
            <a href="https://observablehq.com/d/bc17b13892793ae0">observable notebook</a>.</p>
        </div>
    </div><!-- End How did we calculate what does it smell like row-->

    <!-- When does it smell Row -->
    <div class="row">
        <div class="col">
            <h2>When are Smells Most Reported?</h2>
            <p>Smell reports are not made consistently throughout the day. If you're trying to avoid smells when doing
            certain activities it would make sense to consult the following chart to determine when you'll be the least
            likely to encounter smelly portland air.</p>
            <div id="observable-whenChart"></div>
        </div>
    </div>
    <!-- End when does it smell Row -->

    <hr>

    <!-- Acknowledgements Row -->
    <div id="acknowledgements" class="row">
        <div class="col">
            <h3>Acknowledgements</h3>
            <p>Stinky is a joint project of data science and computer science students at the Roux Institute, Northeastern University, Portland, Maine.
                Thank you to the Greater Portland Council of Governments (GPCOG) for the interesting project.</p>
        </div>
    </div>
    <!-- End Acknowledgements Row -->

    <!-- Smell something say something row -->
    <div id="report" class="row align-items-md-stretch pt-3 mb-5">
        <div class="col-md-12">
            <div class="pt-3 ps-3 pe-3 pb-1 bg-light border rounded-3">
                <div class="row">
                    <div class="col-sm-8">
                        <h4>Smell something? Say something!</h4>
                        <p>Contribute your own smell reports to the map using the SmellMyCity app.
                            Go to <a href="https://smellmycity.org" target="_blank">SmellMyCity</a> on your computer, or
                            if you're on your phone,
                            click the link below to download the app on iOS or Android now!</p>
                    </div>
                    <div class="col-sm-4 text-center align-middle">
                        <a class="navbar-brand" href='https://play.google.com/store/apps/details?id=org.cmucreatelab.smellmycity&hl=en_US'
                            target="_blank"><img alt='Get it on Google Play'
                                src='https://play.google.com/intl/en_us/badges/static/images/badges/en_badge_web_generic.png'
                                height="60" /></a>
                        <a class="navbar-brand" href='https://apps.apple.com/us/app/smell-mycity/id1299801253' target="_blank"><img
                                alt='Download on the App Store'
                                src='https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg' height="40" /></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Smell something say something row -->
    
</div>
</body>

<script type="module">
    import {Runtime, Inspector} from "https://cdn.jsdelivr.net/npm/@observablehq/runtime@5/dist/runtime.js";
            import notebook from "https://api.observablehq.com/d/e5057433bd482160.js@1600?v=3";
    const renders = {
        "container": "#observablehq-container",
        "brush": "#observablehq-brush",
        "selectAllBtn": "#observablehq-selectAllBtn",
        "animateBtn": "#observablehq-animateBtn",
        "resetBtn": "#observablehq-resetBtn",
        "whatSmellGroupedChart": "#observable-wordFrequencyGroupChart",
        "whatSmellChart": "#observable-wordFrequencyChart",
        "whenChart": "#observable-whenChart",
        "testSmellBtn": "#observablehq-smellBtn1",
        "loading": "#observablehq-loading"
    };
    const runtime = new Runtime();
    const main = runtime.module(notebook, name => {
        const selector = renders[name];
        return selector ? new Inspector(document.querySelector(selector)) : true;
    });
</script>
</html>
